<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order Successful - Shopzilla</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f8fafc;
      color: #333;
      margin: 0;
      text-align: center;
    }
    .navbar {
      background: #fff;
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem 5%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      position: sticky; top: 0; z-index: 100;
    }
    .navbar .logo { font-size: 1.5rem; font-weight: 700; color: #007bff; }
    nav a { margin: 0 1rem; color: #333; text-decoration: none; font-weight: 500; }
    nav a:hover, nav a.active { color: #007bff; }

    .success-container {
      margin-top: 5rem;
      background: #fff;
      padding: 3rem 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      width: 90%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .checkmark {
      width: 80px; height: 80px;
      border-radius: 50%;
      background: #28a745;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 1.5rem;
    }
    .checkmark::after {
      content: 'âœ“';
      font-size: 2.5rem;
      color: #fff;
    }
    h2 { margin-bottom: 0.5rem; }
    p { color: #555; margin-bottom: 1rem; }

    .order-summary {
      background: #f1f5f9;
      border-radius: 10px;
      padding: 1.5rem;
      margin: 2rem auto;
      text-align: left;
      max-width: 450px;
    }
    .order-summary h3 {
      color: #007bff;
      margin-bottom: 1rem;
      text-align: center;
    }
    .order-summary p {
      margin: 0.5rem 0;
      font-size: 0.95rem;
    }
    .order-summary strong { color: #000; }

    .summary-table {
      width: 100%;
      border-collapse: collapse;
      background: #fafafa;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 1rem;
    }
    .summary-table th, .summary-table td {
      padding: 8px 10px;
      border-bottom: 1px solid #ddd;
      font-size: 0.9rem;
    }
    .summary-table th {
      background: #e9eef5;
      text-align: left;
    }
    .summary-table tfoot td {
      font-weight: bold;
      background: #fff;
    }

    .delivery-info {
      margin-top: 1.5rem;
      padding: 1rem;
      background: #f9fafb;
      border-radius: 8px;
      font-size: 0.9rem;
    }
    .delivery-info strong {
      color: #000;
    }

    .btn {
      background: #007bff; color: white; border: none;
      padding: 10px 20px; border-radius: 6px; cursor: pointer;
      text-decoration: none; font-weight: 500;
    }
    .btn:hover { background: #0056b3; }

    footer {
      background: #0b0e17;
      color: #fff;
      padding: 3rem 5%;
      display: grid;
      grid-template-columns: 1.5fr 1fr 1fr;
      gap: 2rem;
      margin-top: 4rem;
    }
    footer h3 { margin-bottom: 1rem; font-size: 1.1rem; }
    footer p, footer a { color: #ccc; text-decoration: none; font-size: 0.9rem; }
    footer a:hover { color: #fff; }
    .footer-bottom {
      text-align: center;
      background: #0b0e17;
      color: #aaa;
      padding: 1rem 0;
      font-size: 0.9rem;
      border-top: 1px solid #222;
    }
    .status-paid {
  color: #28a745;
  font-weight: 600;
}

.status-failed {
  color: #dc3545;
  font-weight: 600;
}
.order-summary {
  background: #f1f5f9;
  border-radius: 10px;
  padding: 1.5rem;
  margin: 2rem auto;
  text-align: left;
  max-width: 450px;
  word-break: break-word; /* ðŸ‘ˆ THIS fixes overflow */
  overflow-wrap: break-word; /* ðŸ‘ˆ Fallback for browsers */
}

.order-summary {
  background: #f1f5f9;
  border-radius: 10px;
  padding: 1.5rem;
  margin: 2rem auto;
  text-align: left;
  max-width: 450px;
  word-break: break-word;      /* prevents overflow */
  overflow-wrap: break-word;   /* ensures long IDs wrap */
}

.order-summary p strong {
  display: inline-block;
  min-width: 130px;
}
.text-right { text-align: right; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="navbar">
    <div class="logo">Shopzilla</div>
    <nav>
      <a href="/" class="active">Home</a>
      <a href="/products">Products</a>
      <a href="/about">About</a>
      <a href="/contact">Contact</a>
    </nav>
    <div class="nav-right">
      <a href="/cart" class="cart-btn">ðŸ›’ Cart (0)</a>
      <a href="/login" class="btn-outline">Sign In</a>
      <a href="/register" class="btn btn-primary">Sign Up</a>
    </div>
  </header>

  <!-- Success message -->
  <div class="success-container">
    <div class="checkmark"></div>
    <h2>Thank You for Your Order!</h2>
    <p>Your order has been placed successfully and will be processed soon.</p>

    <!-- ðŸ§¾ Order summary -->
   <div class="order-summary">
  <h3>Order Summary</h3>
  <p><strong>Order ID:</strong> <%= orderNumber || 'N/A' %></p>
  <p><strong>Email:</strong> <%= customerEmail || 'N/A' %></p>

  <p><strong>Payment Status:</strong> 
     <span class="<%= paymentStatus === 'paid' ? 'status-paid' : 'status-failed' %>">
        <%= paymentStatus || 'Unknown' %>
     </span>
  </p>

  <% if (items && items.length > 0) { %>
    <table class="summary-table">
      <thead>
        <tr>
          <th>Product</th>
          <th class="text-right">Price</th>
        </tr>
      </thead>
      <tbody>
        <% items.forEach(item => { %>
          <tr>
            <td><%= item.name %></td>
            <td class="text-right"><%= symbol + Number(item.price).toLocaleString(undefined, { minimumFractionDigits: 2 }) %></td>
          </tr>
        <% }) %>

        <tr>
          <td class="text-right"><strong>Subtotal:</strong></td>
          <td class="text-right"><%= symbol + subtotal.toLocaleString(undefined, { minimumFractionDigits: 2 }) %></td>
        </tr>
        <tr>
          <td class="text-right"><strong>Shipping Fee:</strong></td>
          <td class="text-right"><%= symbol + shippingFee.toLocaleString(undefined, { minimumFractionDigits: 2 }) %></td>
        </tr>
        <tr>
          <td class="text-right"><strong>Tax:</strong></td>
          <td class="text-right"><%= symbol + tax.toLocaleString(undefined, { minimumFractionDigits: 2 }) %></td>
        </tr>
        <tr style="background:#fff;">
          <td class="text-right"><strong>Total:</strong></td>
          <td class="text-right"><%= symbol + total.toLocaleString(undefined, { minimumFractionDigits: 2 }) %></td>
        </tr>
      </tbody>
    </table>
  <% } %>

  <div class="delivery-info">
    <p><strong>Order Date:</strong> <%= orderDate %></p>
    <p><strong>Estimated Delivery:</strong> <%= estimatedDelivery %></p>
  </div>
</div>
    <a href="/products" class="btn">Continue Shopping</a>
  </div>

  <!-- Footer -->
  <footer>
    <div>
      <h3>Shopzilla</h3>
      <p>Your trusted online store for premium products and great service.</p>
    </div>
    <div>
      <h3>Quick Links</h3>
      <a href="/">Home</a><br>
      <a href="/products">Products</a><br>
      <a href="/about">About</a><br>
      <a href="/contact">Contact</a>
    </div>
  </footer>
  <div class="footer-bottom">Â© 2025 Shopzilla. All rights reserved.</div>
</body>
</html>